"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fiboSDK=function(){var c,t,n,e,a=0,r=(new Date).getTime(),s=0,d=0,p=0,f="https://sdkapi.fibodata.com/log",h="https://sdkapi.fibodata.com/logs",g="https://sdkapi.fibodata.com/delayLogs",i="//kwres.killerwhale.cn/mkcloudsdk/js/card.js",o=!1,u=[],v={},l=window.screen.width||0,m=window.screen.height||0,y=window.devicePixelRatio||0,w=Math.max(l,m)*y<=2560?(window.screen.width||0)*(window.devicePixelRatio||0)+"x"+(window.screen.height||0)*(window.devicePixelRatio||0):(window.screen.width||0)+"x"+(window.screen.height||0),x=function(){function e(){this.dataType="json",this.statusCode=null,this.xhr=this.createXHR()}return e.prototype.fn=function(){},e.prototype.createXHR=function(){var e;return(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveObject("Microsoft.XMLHTTP")).onreadystatechange=this.readyStateChange.bind(this),e},e.prototype.request=function(e){var t,n,i,o;return e&&"object"===(void 0===e?"undefined":_typeof(e))&&(this.dataType=e.dataType||"json",o=e.contentType||null,n=e.type.toUpperCase()||"GET",i=e.url,t=e.data||null,this.success=e.success||this.fn,this.error=e.error||this.fn,"GET"===n?(t?(t=this.serialize(t)).toString()&&(i+=(0<=i.indexOf("?")?"&":"?")+t):(t=Math.floor(1e8*Math.random())).toString()&&(i+=(0<=i.indexOf("?")?"&":"?")+t),this.xhr.open(n,i,!0)):"POST"===n&&(this.xhr.open(n,i,!0),o&&"application/json"===o?(this.xhr.setRequestHeader("Content-type","application/json;charset=utf-8"),"object"===(void 0===t?"undefined":_typeof(t))&&(t=JSON.stringify(t))):(!t||t instanceof FormData||this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=utf-8"),t=this.serialize(t))),e.timeout&&(this.xhr.timeout=e.timeout,this.xhr.ontimeout=e.error),this.xhr.send(t)),this},e.prototype.serialize=function(e){return"object"!==(void 0===e?"undefined":_typeof(e))||e instanceof FormData||(e=this.params(e)),e},e.prototype.readyStateChange=function(){var e,t,n;if(4===(n=this.xhr).readyState)if(200<=(t=n.status)&&t<=300||304==t){try{e="json"===this.dataType?JSON.parse(n.responseText):n.responseText}catch(e){return void this.error(e)}this.success(e)}else this.error(n.responseText)},e.prototype.get=function(e,t,n,i,o,r){var a;return a={type:"GET",url:e,data:t,dataType:n,timeout:i,success:o,error:r},this.request(a)},e.prototype.post=function(e,t,n,i,o,r,a){var s;return s={type:"POST",url:e,data:t,dataType:n,contentType:i,timeout:o,success:r,error:a},this.request(s)},e.prototype.params=function(e,t){var n,i,o,r;if("object"===(void 0===e?"undefined":_typeof(e))){for(i in o=[],e)e.hasOwnProperty(i)&&(n=t?t+"["+i+"]":i,"object"===(void 0===(r=e[i])?"undefined":_typeof(r))?r=r instanceof Date||r instanceof String||r instanceof Number?encodeURIComponent(n)+"="+encodeURIComponent(r.toString()):this.params(r,n):(r=null==r?"":encodeURIComponent(r.toString()),r=encodeURIComponent(n)+"="+r),o.push(r));return o.join("&")}return""},e}(),b=b||(c=function(e){return e&&"function"==typeof e},(t=function e(t){if(t&&!c(t))throw new TypeError("The first promise resolver must be resolver");if(!(this instanceof e))return new e(t);var n=this;n._value,n._error,n._status="PENDING",n._resolves=[],n._rejects=[];t&&t(function(e){for(var t;n._resolves.length;)(t=n._resolves.shift())&&(e=t.call(n,e)||e);n._value=e,n._resolves=[],n._status="RESOLVED"},function(e){for(var t;n._rejects.length;)(t=n._rejects.shift())&&(e=t.call(n,e)||e);n._error=e,n._rejcts=[],n._status="REJECTED"})}).prototype.then=function(r,a){var s=this;return t(function(i,o){function e(e){var t,n=c(r)&&r(e)||e;(t=n)&&"function"==typeof t.then?n.then(function(e){i(e)},function(e){o(e)}):i(n)}function t(e){c(a)&&a(e),o(e)}var n=s._status;"PENDING"===n?(s._resolves.push(e),s._rejects.push(t)):"RESOLVED"===n?e(s._value):"REJECTED"===n&&t(s._error)})},t.all=function(c){if(e=c,"[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("You must pass an array to all.");var e;return t(function(n,t){var i=[],o=c.length,r=0;function e(t){return function(e){i[t]=e,++r===o&&n(i)}}function a(e){t(e)}for(var s=0;s<o;s++)c[s].then(e(s),a)})},t.prototype.catch=function(e){return this.then(void 0,e)},t),E=function(e){var p=window&&window.navigator&&window.navigator.userAgent;if(!p)return{};var t=function(e){var t="pc",n="";if(/iPhone/i.test(p))t="iphone",/iPhone OS ([^ ;]*)/.test(p)&&(n=RegExp.$1.replace(/_/g,"."));else if(/(iPad|iPod)/i.test(p))t="ipad",/iPhone OS ([^ ;]*)/.test(p)&&(n=RegExp.$1.replace(/_/g,"."));else if(/Android/i.test(p))t="android",/Android ([^ ;]*)/.test(p)&&(n=RegExp.$1);else if(/Windows Phone/i.test(p))t="WP";else if(/Windows/i.test(p)){if(t="Windows",/Windows NT (\d+\.*\d*)/.test(p))switch(RegExp.$1){case"10.0":case"10":n="10";break;case"6.4":n="10技术预览版";break;case"6.3":n="8.1";break;case"6.2":n="8";break;case"6.1":n="7";break;case"6.0":n="vista";break;case"5.2":case"5.1":n="xp"}}else/Mac OS X/.test(p)?(t="Mac",/Mac OS X ([^ ;]*)/.test(p)&&(n=RegExp.$1.replace(/_/g,"."))):(/X11/.test(p)||/Linux/.test(p))&&(t="Linux");var i,o="",r="",a="";if("android"===t){o=/GT-|SM-|SCH-/gi.test(i=e)?"samsung":/HM|RedMi|Mi|MIX/gi.test(i)?"xiaomi":/HUAWEI|HONOR/gi.test(i)?"Huawei":/vivo/gi.test(i)?"vivo":/Meitu|MP/gi.test(i)?"Meitu":/OPPO|R6|R7|R8/gi.test(i)?"OPPO":/Coolpad|SK1/gi.test(i)?"Coolpad":/ASUS/gi.test(i)?"ASUS":/ZTE/gi.test(i)?"ZTE":/HTC/gi.test(i)?"HTC":/Sony/gi.test(i)?"Sony":/Lenovo/gi.test(i)?"Lenovo":/NX5/gi.test(i)?"nubia":/SM|YQ/gi.test(i)?"Smartisan":/m([0-9cx]{1,4})/gi.test(i)||/PRO 5/g.test(i)?"meizu":"UNKOWN";var s,c,d=e&&e.search("Build");-1!==d&&(s=e&&e.substr(0,d).split(";"),c=e&&e.substr(d).split(";")),s&&" "===(r=s[s.length-1])[0]&&(r=r.substr(1)),c&&(a=c[0].split("/")[1])}else"iphone"===t?(o="iphoneOther",320===l&&(480===m&&(o=2===y?"iphone4x":"iphoneOther"),568===m&&(o="iphone5x")),375===l&&(667===m?o="iphone6x":812===m&&(o="iphoneX")),414===l&&(o="iphone6xp")):"pc"!==t&&"Windows"!==t&&"Mac"!==t&&"Linux"!==t||(/se\s(2\.x)/gi.test(p)?(o="sougou",r=RegExp.$1):/LBBROWSER/gi.test(p)?o="liebao":/qqbrowser\/([^\s;]*)/gi.test(p)?(o="qq",r=RegExp.$1):/UBrowser\/([^\s;]*)/gi.test(p)?(o="uc",r=RegExp.$1):/Maxthon\/([^\s;]*)/gi.test(p)?(o="maxthon",r=RegExp.$1):/360se/gi.test(p)?o="360se":/360ee/gi.test(p)?o="360ee":/BIDUBrowser|BaiduHD\s([^\s;]*)/gi.test(p)?(o="baidu",r=RegExp.$1):/TaoBrowser\/([^\s;]*)/gi.test(p)?(o="taobao",r=RegExp.$1):/Firefox\/([^\s;]*)/gi.test(p)?(o="firefox",r=RegExp.$1):/Opera|opr\/([^\s;]*)/gi.test(p)?(o="firefox",r=RegExp.$1):/msie\s([^\s;]*)/gi.test(p)?(o="ie",r=RegExp.$1):/Trident/gi.test(p)?(o="ie",/rv:([^\s;]*)/gi.test(p)&&(r=RegExp.$1)):/edge\/([^\s;])/gi.test(p)?(o="edge",r=RegExp.$1):/chrome\/([^\s;]*)/gi.test(p)?(o="chrome",r=RegExp.$1):/safari\/([^\s;]*)/gi.test(p)&&(o="safari",r=RegExp.$1));return{device:t,deviceVersion:n,model:o,mdetail:r.trim(),build:a}}(p.split(/[ ]\(|\)[ ]/)[1]),n=function(e){var t="",n="",i=function(){for(var e="",t=["MicroMessenger","Weibo","Qzone","QQ","NewsArticle"],n=t.length,i=0;i<n;i++)e+=0===i?t[i]:"|"+t[i];return e&&(e="\\b("+e+")/[^ ]*"),new RegExp(e)}(),o=e.match(i);if(o){var r=o[0].split("/");t=r[0],n=r[1]}return{appSrc:t,appVer:n}}(p),i="";if("MicroMessenger"===n.appSrc||"QQ"===n.appSrc||"Qzone"===n.appSrc){var o=p.match(/NetType\/[a-z0-9A-Z_]+/);null!==o&&(i=o[0].split("/")[1])}return{isWeixin:"MicroMessenger"===n.appSrc,appSrc:"MicroMessenger"===n.appSrc?"Weixin":n.appSrc,appVer:n.appVer,netType:i,device:t.device,deviceVersion:t.deviceVersion,build:t.build,model:t.model,mdetail:t.mdetail}}(),T=function(){var d={get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)")),n=window.localStorage||!1;if(null!=t&&(t=t[2],n))try{window.localStorage.setItem(e,t)}catch(e){}return null===t&&n&&null!=(t=window.localStorage.getItem(e))&&d.add(e,t,1e4),t?decodeURIComponent(t):null},add:function(e,t,n){var i=e+"="+encodeURIComponent(t)+";";if(0!=n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),i+="expires="+o.toGMTString()}i+=";path=/",document.cookie=i;try{window.localStorage&&window.localStorage.setItem(e,t)}catch(e){}}};function e(e,t){for(var n={},i=0;i<t.length;i++){var o=new RegExp("(^|&)"+t[i]+"=([^&]*)(&|$)"),r=e.match(o),a="";null!=r&&(a=decodeURIComponent(r[2])),n[t[i]]=a}return n}var p=e(window.location.search.substr(1),["lc","sui","cnl","cnltype","from","actid","stepid","testsdk","producttype","qz_gdt","gdt_vid","mkcloudsdk","appSrc","demostrator"]);function u(e,t){if("object"===(void 0===t?"undefined":_typeof(t)))for(var n in t)t[n]&&(e[n]=t[n])}function l(e){var t="",n=!1;for(var i in e)n&&e[i]&&(t+="&"),e[i]&&(t+=i+"="+e[i]),!n&&e[i]&&(n=!0);return t}function i(){var e=E.device;return"android"===e||"iphone"===e||"ipad"===e||"WP"===e}var t,n,o,r=(t="mousedown",n="mousemove",o="mouseup",i()&&(t="touchstart",n="touchmove",o="touchend"),{downEvent:t,moveEvent:n,upEvent:o});return{cookieHandler:d,getParaObj:e,urlPara:p,pushEvent:function(e,n,t,i){var o,r,a;if(r=e?"unloadfixed"===e?g:f:h,u(o=i&&"object"===(void 0===i?"undefined":_typeof(i))?i:{},{pfid:v.pfid,appid:v.appid,mpid:v.mpid,openid:v.openid,unionid:v.unionid,apptype:v.apptype||"NULL",userid:v.userid,actid:p.actid,stepid:p.stepid,cnl:p.cnl,sui:p.sui,cnltype:p.cnltype,rp:null==d.get("rp")?"":d.get("rp"),intid:v.intid,ext:null==d.get("ext")?"":d.get("ext"),eventtype:"unloadfixed"===e?"":e}),(v.function||""===v.function)&&T.addParaToObj(o,{function:v.function}),n=JSON.stringify(n),(a=l(o))&&(r+="?"+a),1==+p.demostrator||"true"===p.demostrator){var s,c=window.RP_GLOBAL_APIS&&window.RP_GLOBAL_APIS.fireEvent;try{s={qs:a,body:JSON.parse(n)}}catch(e){s={qs:a,body:n}}c&&c("RP_RENDERER_PUSH_FIBO_DATA",s)}return"unload"===e||"exit"===e?(r+="&eventargs="+n,void((new Image).src=r)):new b(function(t,e){(new x).post(r,n,"json","application/json",null,function(e){t(e)},function(e){t(e)})})},pushAction:function(e){var t="",n="",i=p.qz_gdt,o=p.gdt_vid;if(i?(t="qz_gdt",n=i):o&&(t="gdt_vid",n=o),!n||"linkclick"!==e&&"formInfo"!==e)return new b(function(e,t){e("广电通")});var r={url:encodeURIComponent(location.href),eventtype:e,click_type:t,click_id:n};return new b(function(t,e){(new x).get("https://sdkapi.fibodata.com/tsa/userActions/add",r,"json",null,function(e){t(e)},function(e){t(e)})})},addParaToUrl:function(e,t,n){return null!=n&&null!=n||(n=""),-1!=e.indexOf("?")||-1!=e.indexOf("=")?e+"&"+t+"="+n:e+"?"+t+"="+n},addParaToObj:u,objToQuery:l,isNotEmptyObj:function(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&(!Object.keys||0!==Object.keys(e).length)},isFunction:function(e){return e&&"function"==typeof e},isFiboOpenid:function(e){return e&&"string"==typeof e&&"o7kepw"===e.slice(0,6)},generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[],i=t.length;for(e=0;e<30;e++)n[e]=t[0|Math.random()*i];return n.join("")},isMobile:i,isIphone:function(){var e=E.device;return"iphone"===e||"ipad"===e},getParamsFromMouseEvent:function(e){var t=e,n=document.scrollingElement;return i()&&(t=e.changedTouches[0]),{onPercentage:((n.scrollTop+innerHeight)/n.scrollHeight).toFixed(2),screenx:(t.pageX/n.scrollWidth).toFixed(2),screeny:(t.pageY/n.scrollHeight).toFixed(2)}},eventName:r}}(),S=(n=[],{add:function(e){"function"==typeof e&&(!0===o?e():n.push(e))},fire:function(){for(;0<n.length;)n.shift()()}});function k(e,t){o=!0,function(e,t){var n,i,o,r;n=e.rp||"",i=e.intid||T.generateUUID(),o=e.ext||T.cookieHandler.get("ext")||"",r=e.openid||t.openid||"",n?T.cookieHandler.add("rp",n,1e4):T.cookieHandler.get("rp")||T.cookieHandler.add("rp",T.generateUUID());T.addParaToObj(v,{intid:i}),T.isFiboOpenid(o)?T.cookieHandler.add("ext",o,1e4):T.addParaToObj(v,{openid:o});T.isFiboOpenid(r)?T.cookieHandler.add("ext",r,1e4):T.addParaToObj(v,{openid:r})}(e,t),u.length&&(T.pushEvent("",u),u=[]),S.fire(),e&&T.addParaToObj(v,{function:e.function||""})}function R(e){a=(new Date).getTime();var t={isWeixin:E.isWeixin,useragent:E.device,uaVer:E.deviceVersion,lc:parseInt(T.urlPara.lc,10)||0,shareType:T.urlPara.from,netType:E.netType,appSrc:T.urlPara.appSrc||E.appSrc,appVer:E.appVer,screen:w,model:E.model,mdetail:E.mdetail,build:E.build,rurl:document.referrer,url:location.href,title:document.title};e&&(t.userInfo=e),"groupmessage"!==t.shareType&&"singlemessage"!==t.shareType&&"timeline"!==t.shareType&&(t.shareType="");var n=document.referrer;-1==n.indexOf("mp.weixin.qq.com")&&-1==n.indexOf("mp.weixinbridge.com")||(t.shareType="gzh");var i=[];t&&i.push({t:"view",v:t}),e&&i.push({t:"userinfo",v:e}),T.pushEvent("",i)}function O(e){var t,n=s;return void 0===e||isNaN(e)||e<0||(n=e),t=(new Date).getTime(),{currentPage:n,totalPage:p,staytm:t-a}}function P(){var e,t,n=1e3,i=1,o=(new Date).getTime()-r;1e4<=o&&(n=5e3,i=5),e=[{t:"unload",v:{staytm:o+=n}}],(0<s||0<d)&&((t=O(d)).staytm+=n,e.push({t:"exit",v:t})),T.pushEvent("unloadfixed",e,null,{delay:i}),setTimeout(P,n)}function _(t){var e=t||location.href;try{var n="";if(-1!=e.indexOf("#")){var i=e.split("#");n=i[1],e=i[0]}var o=encodeURIComponent(T.urlPara.lc),r="",a=encodeURIComponent(T.urlPara.cnl||"");return o=""===o?1:parseInt(o,10)+1,(isNaN(o)||0===o)&&(o=1),null===(r=encodeURIComponent(T.cookieHandler.get("rp")))&&(r=T.generateUUID(),T.cookieHandler.add("rp",r,1e4)),e=-1!=(e=-1!=e.indexOf("lc=")?e.replace(/lc=\d{1,5}/,"lc="+o):T.addParaToUrl(e,"lc",o)).indexOf("sui=")?e.replace(/sui=[^&]+/,"sui="+r):T.addParaToUrl(e,"sui",r),""!==a&&(e=-1===e.indexOf("cnl=")?T.addParaToUrl(e,"cnl",a):e.replace(/cnl=[^&]+/,"cnl="+a)),""!=n&&(e+="#"+n),e}catch(e){return t}}return"true"===T.urlPara.testsdk.toString()&&(f="https://sdkapi.fibodata.com/testlog",h="https://sdkapi.fibodata.com/testlogs",g="https://sdkapi.fibodata.com/testdelayLogs",i="//kwtcdn.killerwhale.cn/mkcloudsdk/js/card.js"),window.addEventListener&&(T.isIphone()?S.add(P):window.addEventListener("unload",function(){var e;e={staytm:(new Date).getTime()-r},T.pushEvent("unload",e)},!1)),"namecard"===(e=T.urlPara).mkcloudsdk&&e.cnl&&e.cnltype&&function(e,t,n){var i=document.querySelector("script[src*='"+e+"']"),o=n||window;if(i)return T.isFunction(t)&&t.call(o,i);(i=document.createElement("script")).setAttribute("type","text/javascript"),T.isFunction(t)&&(i.onload=function(){this.onload=null,t.call(o,this)}),i.setAttribute("src",e),document.querySelector("head").appendChild(i)}(location.protocol+i),{init:function(e){var t,n,i=e||{},o="https://sdkapi.fibodata.com/init";i.userInfo&&(n=i.userInfo,delete i.userInfo),T.addParaToObj(v,{pfid:i.pfid||"",appid:i.appid||"",mpid:i.mpid||"",openid:i.openid||"",unionid:i.unionid||n&&n.unionid,apptype:i.apptype||"NULL",userid:i.userid,rp:null==T.cookieHandler.get("rp")?"":T.cookieHandler.get("rp"),ext:null==T.cookieHandler.get("ext")?"":T.cookieHandler.get("ext")}),(t=T.objToQuery(v))&&(o+="?"+t),(new x).get(o,{},"json",5e3,function(e){k(e.data,i),R(n)},function(e){k({},i),R(n)})},share:function(e){var t={staytm:(new Date).getTime()-a,useragent:E.device,title:document.title};/^(timeline|friend|qq|txweibo|qzone)$/.test(e)&&(t.shareType=e),T.pushEvent("share",t)},btnClick:function(e,t,n){n=n||"NULL",e=e.toString(),t=t.toString();var i=e.replace(/[#&]/g,"_"),o=t.replace(/[#&]/g,"_");try{var r=event||window.event,a=r&&(r.target||r.srcElement);if(a&&"A"===a.tagName&&/^http/.test(a.href)){var s=a.href;r.preventDefault?r.preventDefault():r.returnValue=!1,b.all([T.pushAction("linkclick"),T.pushEvent("linkclick",{btname:i,remark:o,type:n})]).then(function(){location.href=s},function(){location.href=s})}else b.all([T.pushAction("linkclick"),T.pushEvent("linkclick",{btname:i,remark:o,type:n})])}catch(e){}},saveFormInfo:function(e,t){void 0===t&&(t="1"),e.data?b.all([T.pushAction("formInfo"),T.pushEvent("formInfo",{formInfo:e})]):T.isNotEmptyObj(e)&&b.all([T.pushAction("formInfo"),T.pushEvent("formInfo",{formInfo:{data:e,version:t}})])},switchPage:function(e,t,n){if(!(isNaN(e)||isNaN(t)||isNaN(n)||e<=0||t<=0||n<=0||n<e||n<t||e==t)){var i=(new Date).getTime(),o=i-a;if(a=i,!(o<0)){var r={ctp:e,tgp:t,ttp:n,staytm:o};s=e,d=t,p||(p=n),T.pushEvent("switchpage",r)}}},dealUrl:_,preShareUrl:_,exitPage:function(e){var t;if(T.isIphone())return!1;t=O(e),T.pushEvent("exit",t)}}}();